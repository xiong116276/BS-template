KindEditor.plugin("quickformat",function(g){var f=this,i="quickformat",h=g.toMap("blockquote,center,div,h1,h2,h3,h4,h5,h6,p");function j(a){var b=a.first();while(b&&b.first()){b=b.first()}return b}f.clickToolbar(i,function(){f.focus();var b=f.edit.doc,o=f.cmd.range,a=g(b.body).first(),d,n=[],p=[],e=o.createBookmark(true);while(a){d=a.next();var c=j(a);if(!c||c.name!="img"){if(h[a.name]){a.html(a.html().replace(/^(\s|&nbsp;|ã€€)+/ig,""));a.css("text-indent","2em")}else{p.push(a)}if(!d||(h[d.name]||h[a.name]&&!h[d.name])){if(p.length>0){n.push(p)}p=[]}}a=d}g.each(n,function(l,m){var k=g('<p style="text-indent:2em;"></p>',b);m[0].before(k);g.each(m,function(t,s){k.append(s)})});o.moveToBookmark(e);f.addBookmark()})});