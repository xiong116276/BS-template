KindEditor.plugin("link",function(e){var d=this,f="link";d.plugin.link={edit:function(){var b=d.lang(f+"."),l='<div style="padding:20px;"><div class="ke-dialog-row"><label for="keUrl" style="width:60px;">'+b.url+'</label><input class="ke-input-text" type="text" id="keUrl" name="url" value="" style="width:260px;" /></div><div class="ke-dialog-row""><label for="keType" style="width:60px;">'+b.linkType+'</label><select id="keType" name="type"></select></div></div>',m=d.createDialog({name:f,width:450,title:d.lang(f),body:l,yesBtn:{name:d.lang("yes"),click:function(g){var h=e.trim(k.val());if(h=="http://"||e.invalidUrl(h)){alert(d.lang("invalidUrl"));k[0].focus();return}d.exec("createlink",h,c.val()).hideDialog().focus()}}}),a=m.div,k=e('input[name="url"]',a),c=e('select[name="type"]',a);k.val("http://");c[0].options[0]=new Option(b.newWindow,"_blank");c[0].options[1]=new Option(b.selfWindow,"");d.cmd.selection();var n=d.plugin.getSelectedLink();if(n){d.cmd.range.selectNode(n[0]);d.cmd.select();k.val(n.attr("data-ke-src"));c.val(n.attr("target"))}k[0].focus();k[0].select()},"delete":function(){d.exec("unlink",null)}};d.clickToolbar(f,d.plugin.link.edit)});